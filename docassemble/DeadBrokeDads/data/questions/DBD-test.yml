objects:
  - your_past_benefits: DADict.using(object_type=DAObject)
  - your_children_past_benefits: DADict.using(object_type=DAObject)
---
mandatory: True
code: |
  # get a static income list
  your_true_benefits = your_income_list.true_values()
  
  # only ask about benefits if any listed
  your_past_benefits.there_are_any = len(your_true_benefits) > 0

  # same as above
  your_children_true_benefits = your_children_income_list.true_values()
  your_children_past_benefits.there_are_any = len(your_children_true_benefits) > 0
    
  hi
---
code: |
  # ask for every value in true_benefits in a pseudo-loop.
  # every time this code executes, we add one item to your_past_benefits
  # from your_true_benefits
  
  if len(your_past_benefits) < len(your_true_benefits):
    next_item = your_true_benefits[len(your_past_benefits)].upper()
    your_past_benefits.new_item_name = next_item
    
    # say that we expect another field (will ask for necessary fields)
    your_past_benefits.there_is_another = True      
  else:
    # say that no more fields are needed
    your_past_benefits.there_is_another = False
---
code: |
  if len(your_children_past_benefits) < len(your_children_true_benefits):
    next_item = your_children_true_benefits[len(your_children_past_benefits)].upper()
    your_children_past_benefits.new_item_name = next_item
    
    your_children_past_benefits.there_is_another = True
  else:
    your_children_past_benefits.there_is_another = False
---
question: |
  Did you ever get any of these benefits?
fields:
  - no label: your_income_list
    datatype: checkboxes
    choices:
      - SSI: ssi
      - TAFDC: tafdc
      - EAEDC: eaedc
---
question: |
  About your ${ i } benefit
fields:
  - When did your ${ i } start?: your_past_benefits[i].start_date
    datatype: date
  - Are you still receiving ${ i }?: your_past_benefits[i].still_receiving
    datatype: yesnoradio
  - When did your ${ i } end?: your_past_benefits[i].end_date
    datatype: date
    js show if: |
      val("your_past_benefits[i].still_receiving") === false
---
need: your_past_benefits[i].start_date
question: |
  Did DOR take money from your bank account when you were getting ${ i }?
fields:
  - no label: your_past_benefits[i].take_money
    datatype: yesnoradio
---
question: |
  Did your children ever get any of these benefits?
fields:
  - no label: your_children_income_list
    datatype: checkboxes
    choices:
      - SSI: ssi
      - TAFDC: tafdc
      - EAEDC: eaedc
---
question: |
  About your child(ren)'s ${ i } benefit
fields:
  - When did your ${ i } start?: your_children_past_benefits[i].start_date
    datatype: date
  - Are you still receiving ${ i }?: your_children_past_benefits[i].still_receiving
    datatype: yesnoradio
  - When did your ${ i } end?: your_children_past_benefits[i].end_date
    datatype: date
    js show if: |
      val("your_children_past_benefits[i].still_receiving") === false
---
need: your_children_past_benefits[i].start_date
question: |
  Did DOR take money from your bank account when your children were getting ${ i }?
fields:
  - no label: your_children_past_benefits[i].take_money
    datatype: yesnoradio
---
question: |
  Hi
subquestion: |
  Your past benefits:
  % for item in your_past_benefits:
  ${ item } : ${ your_past_benefits[item].take_money }, ${ your_past_benefits[item].start_date }
  % endfor
  
  Your children's past benefits
  % for item in your_children_past_benefits:
  ${ item } : ${ your_children_past_benefits[item].take_money }
  % endfor
field: hi